# locations used by many scripts

functionname=security-master.debian.org
base=/srv/${functionname}
public=/srv/security.debian.org
bindir=$base/bin
ftpdir=$base/ftp/
masterdir=$base/dak/
configdir=$masterdir/config/debian-security/
webdir=$masterdir/web
indices=$ftpdir/indices
archs=$(dak admin a list | tr '\n' ' ')

scriptdir=$base/scripts
scriptsdir=$masterdir/scripts/debian/
dbdir=$base/dak-database/
lockdir=$base/lock
stagedir=$lockdir/stages
overridedir=$base/override
extoverridedir=$scriptdir/external-overrides
logdir=$base/log/cron/

queuedir=$base/queue/
unchecked=$queuedir/unchecked/
newstage=$queuedir/newstage/
disembargo=$queuedir/unchecked-disembargo/
done=$queuedir/done/

mirrordir=$base/mirror/
incoming=${base}/buildd
exportdir=$base/export/
exportpublic=$public/rsync/export/

uploadhost=ftp-master.debian.org
uploaddir=/pub/UploadQueue/

ftpgroup=debadmin
public_archives=(security debian-security-debug)

components="main non-free contrib"
suites=$(dak admin s list)
override_types="deb dsc udeb"

TMPDIR=${base}/tmp

PATH=$masterdir:$PATH
umask 022
unset CDPATH

# Various lockfiles used by multiple cron scripts
LOCK_DAILY="${lockdir}/daily.lock"
LOCK_UNCHECKED="${lockdir}/unchecked.lock"
LOCK_STOP="${lockdir}/archive.stop"

# And the following types of cronscripts exists
declare -lr POSSIBLEARGS='+(unchecked-dinstall)'
declare -r HOSTNAME=$(hostname -s)

# Set the database variables
eval $(dak admin config db-shell)

PATH=$masterdir:$PATH
umask 022
